(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))p(c);new MutationObserver(c=>{for(const m of c)if(m.type==="childList")for(const s of m.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&p(s)}).observe(document,{childList:!0,subtree:!0});function g(c){const m={};return c.integrity&&(m.integrity=c.integrity),c.referrerPolicy&&(m.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?m.credentials="include":c.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function p(c){if(c.ep)return;c.ep=!0;const m=g(c);fetch(c.href,m)}})();var z={},se;function de(){return se||(se=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.countMap=e.Random=e.phi=e.radiansPerDegree=e.degreesPerRadian=e.FULL_CIRCLE=e.FIGURE_SPACE=e.NON_BREAKING_SPACE=e.MIN_DATE=e.MAX_DATE=e.csvStringToArray=void 0,e.assertClass=o,e.assertNonNullable=g,e.sleep=p,e.testXml=c,e.parseXml=m,e.followPath=s,e.getAttribute=w,e.parseFloatX=y,e.parseIntX=T,e.parseTimeT=N,e.pickAny=P,e.pick=F,e.take=l,e.filterMap=a,e.makePromise=u,e.dateIsValid=h,e.angleBetween=S,e.positiveModulo=L,e.rotateArray=R,e.rectUnion=re,e.rectAddPoint=Se,e.dateToFileName=Le,e.lerp=Te,e.assertFinite=ve,e.shuffleArray=Me,e.zip=be,e.count=Ce,e.initializedArray=ie,e.sum=Ie,e.makeLinear=Ne,e.makeBoundedLinear=Ae,e.polarToRectangular=Fe,e.permutations=oe,e.gcd=Y,e.lcm=Re;function o(t,n,i="Assertion Failed."){const r=d=>{throw new Error(`${i}  Expected type:  ${n.name}.  Found type:  ${d}.`)};if(t===null)r("null");else if(typeof t!="object")r(typeof t);else if(!(t instanceof n))r(t.constructor.name);else return t;throw new Error("wtf")}function g(t){if(t==null)throw new Error("wtf");return t}function p(t){return new Promise(n=>{setTimeout(n,t)})}function c(t){const i=new DOMParser().parseFromString(t,"application/xml");for(const r of Array.from(i.querySelectorAll("parsererror")))if(r instanceof HTMLElement)return{error:r};return{parsed:i}}function m(t){if(t!==void 0){const{parsed:n}=c(t);return n?.documentElement}}function s(t,...n){for(const i of n){if(t===void 0)return;if(typeof i=="number")t=t.children[i];else{const r=t.getElementsByTagName(i);if(r.length!=1)return;t=r[0]}}return t}function w(t,n,...i){if(n=s(n,...i),n!==void 0&&n.hasAttribute(t))return n.getAttribute(t)??void 0}function y(t){if(t==null)return;const n=+t;if(isFinite(n))return n}function T(t){const n=y(t);if(n!==void 0)return n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER||n!=Math.floor(n)?void 0:n}function N(t){if(typeof t=="string"&&(t=T(t)),t!=null&&!(t<=0))return new Date(t*1e3)}const A=t=>{const n=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,i=[[]];let r;for(;r=n.exec(t);)r[1].length&&r[1]!==","&&i.push([]),i[i.length-1].push(r[2]!==void 0?r[2].replace(/""/g,'"'):r[3]);return i};e.csvStringToArray=A;function P(t){const n=t.values().next();if(!n.done)return n.value}function F(t){if(t.length==0)throw new Error("wtf");return t[Math.random()*t.length|0]}function l(t){if(t.length<1)throw new Error("wtf");const n=Math.random()*t.length|0;return t.splice(n,1)[0]}function a(t,n){const i=[];return t.forEach((r,d)=>{const f=n(r,d);f!==void 0&&i.push(f)}),i}function u(){let t,n;return{promise:new Promise((r,d)=>{t=r,n=d}),resolve:t,reject:n}}e.MAX_DATE=new Date(864e13),e.MIN_DATE=new Date(-864e13);function h(t){return isFinite(t.getTime())}e.NON_BREAKING_SPACE=" ",e.FIGURE_SPACE=" ",e.FULL_CIRCLE=2*Math.PI,e.degreesPerRadian=360/e.FULL_CIRCLE,e.radiansPerDegree=e.FULL_CIRCLE/360,e.phi=(1+Math.sqrt(5))/2;function S(t,n){const i=L(t,e.FULL_CIRCLE);let d=L(n,e.FULL_CIRCLE)-i;const f=e.FULL_CIRCLE/2;if(d>f?d-=e.FULL_CIRCLE:d<-f&&(d+=e.FULL_CIRCLE),Math.abs(d)>f)throw new Error("wtf");return d}function L(t,n){const i=t%n;return i<0?i+Math.abs(n):i}function R(t,n){if((n|0)!=n)throw new Error(`invalid input: ${n}`);return n=L(n,t.length),n==0?t:[...t.slice(n),...t.slice(0,n)]}class ye{constructor(){throw new Error("wtf")}static sfc32(n,i,r,d){function f(){n|=0,i|=0,r|=0,d|=0;let I=(n+i|0)+d|0;return d=d+1|0,n=i^i>>>9,i=r+(r<<3)|0,r=r<<21|r>>>11,r=r+I|0,(I>>>0)/4294967296}const M=f;return Object.defineProperty(M,"currentSeed",{get(){return JSON.stringify([n,i,r,d])}}),M}static#e=42;static seedIsValid(n){try{return this.create(n),!0}catch{return!1}}static create(n=this.newSeed()){console.info(n);const i=JSON.parse(n);if(!(i instanceof Array))throw new Error("invalid input");if(i.length!=4)throw new Error("invalid input");const[r,d,f,M]=i;if(!(typeof r=="number"&&typeof d=="number"&&typeof f=="number"&&typeof M=="number"))throw new Error("invalid input");return this.sfc32(r,d,f,M)}static newSeed(){const n=[];return n.push(Date.now()|0),n.push(this.#e++|0),n.push(Math.random()*2**31|0),n.push(performance.now()*1e4|0),JSON.stringify(n)}static fromString(n){try{return this.create(n)}catch{return this.create(this.anyStringToSeed(n))}}static anyStringToSeed(n){function i(f,M){return(f<<M|f>>>32-M)>>>0}const r=[2654435769,608135816,2242054355,320440878];return new TextEncoder().encode(n).forEach(f=>{r[0]^=f,r[0]=i(r[0],3),r[1]^=f,r[1]=i(r[1],5),r[2]^=f,r[2]=i(r[2],7),r[3]^=f,r[3]=i(r[3],11)}),r[0]^=i(r[1],7),r[1]^=i(r[2],11),r[2]^=i(r[3],13),r[3]^=i(r[0],17),JSON.stringify(r)}static test(){const r=[this.create()];for(;r.length<=10;){for(let f=0;f<20;f++){const M=r.map(I=>I());for(let I=1;I<M.length;I++)if(M[I]!==M[0]){debugger;throw new Error("wtf")}}const d=F(r).currentSeed;r.forEach(f=>{if(f.currentSeed!=d){debugger;throw new Error("wtf")}}),r.push(this.create(d))}}}e.Random=ye;function re(t,n){const i=Math.min(t.x,n.x),r=Math.min(t.y,n.y),d=Math.max(t.x+t.width,n.x+n.width),f=Math.max(t.y+t.height,n.y+n.height),M=d-i,I=f-r;return{x:i,y:r,width:M,height:I}}function Se(t,n,i){return re(t,{x:n,y:i,width:0,height:0})}function Le(t){return isNaN(t.getTime())?"0000⸱00⸱00 00⦂00⦂00":`${t.getFullYear().toString().padStart(4,"0")}⸱${(t.getMonth()+1).toString().padStart(2,"0")}⸱${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}⦂${t.getMinutes().toString().padStart(2,"0")}⦂${t.getSeconds().toString().padStart(2,"0")}`}function Te(t,n,i){return t+(n-t)*i}function ve(...t){t.forEach(n=>{if(!Number.isFinite(n))throw new Error("wtf")})}function Me(t){for(let n=t.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[t[n],t[i]]=[t[i],t[n]]}return t}function*be(...t){const n=t.map(i=>i[Symbol.iterator]());for(;;){const i=n.map(r=>r.next());if(i.some(({done:r})=>r))break;yield i.map(({value:r})=>r)}}function*Ce(t=0,n=1/0,i=1){for(let r=t;r<n;r+=i)yield r}function ie(t,n){const i=[];for(let r=0;r<t;r++)i.push(n(r));return i}e.countMap=ie;function Ie(t){return t.reduce((n,i)=>n+i,0)}function Ne(t,n,i,r){const d=(r-n)/(i-t);return function(f){return(f-t)*d+n}}function Ae(t,n,i,r){i<t&&([t,n,i,r]=[i,r,t,n]);const d=(r-n)/(i-t);return function(f){return f<=t?n:f>=i?r:(f-t)*d+n}}function Fe(t,n){return{x:Math.cos(n)*t,y:Math.sin(n)*t}}function*oe(t,n=[]){if(t.length==0)yield n;else for(let i=0;i<t.length;i++){const r=t[i],d=[...n,r],f=[...t.slice(0,i),...t.slice(i+1)];yield*oe(f,d)}}function Y(t,n){return n?Y(n,t%n):t}function Re(t,n){return t*n/Y(t,n)}})(z)),z}var C=de(),v={},ae;function ke(){if(ae)return v;ae=1,Object.defineProperty(v,"__esModule",{value:!0}),v.AnimationLoop=void 0,v.getById=o,v.selectorQueryAll=g,v.querySelectorAll=p,v.selectorQuery=c,v.querySelector=m,v.loadDateTimeLocal=s,v.getBlobFromCanvas=w,v.getAudioBalanceControl=y,v.getHashInfo=T,v.createElementFromHTML=N,v.download=A,v.getDataUrl=F;const e=de();function o(l,a){const u=document.getElementById(l);if(!u)throw new Error("Could not find element with id "+l+".  Expected type:  "+a.name);if(u instanceof a)return u;throw new Error("Element with id "+l+" has type "+u.constructor.name+".  Expected type:  "+a.name)}function g(l,a,u=1,h=1/0,S=document){const L=[];if(S.querySelectorAll(l).forEach(R=>{L.push((0,e.assertClass)(R,a))}),L.length<u||L.length>h)throw new Error(`Expecting "${l}" to return [${u} - ${h}] instances of ${a.name}, found ${L.length}.`);return L}function p(l,a,u=1,h=1/0,S=document){const L=[];if(S.querySelectorAll(l).forEach(R=>{L.push((0,e.assertClass)(R,a))}),L.length<u||L.length>h)throw new Error(`Expecting "${l}" to return [${u} - ${h}] instances of ${a.name}, found ${L.length}.`);return L}function c(l,a,u=document){return g(l,a,1,1,u)[0]}function m(l,a,u=document){return p(l,a,1,1,u)[0]}function s(l,a,u="milliseconds"){let h;switch(u){case"minutes":{h=a.getSeconds()*1e3+a.getMilliseconds();break}case"seconds":{h=a.getMilliseconds();break}case"milliseconds":{h=0;break}default:throw new Error("wtf")}l.valueAsNumber=+a-a.getTimezoneOffset()*6e4-h}function w(l){const{reject:a,resolve:u,promise:h}=(0,e.makePromise)();return l.toBlob(S=>{S?u(S):a(new Error("blob is null!"))}),h}function y(l){const a=new AudioContext,u=a.createMediaElementSource(l),h=new StereoPannerNode(a,{pan:0});return u.connect(h).connect(a.destination),S=>{h.pan.value=S}}function T(){const l=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(h=>{const S=h.split("=",2);if(S.length==2){const L=decodeURIComponent(S[0]),R=decodeURIComponent(S[1]);l.set(L,R)}}),l}function N(l,a){var u=document.createElement("div");return u.innerHTML=l.trim(),(0,e.assertClass)(u.firstChild,a,"createElementFromHTML:")}function A(l,a){var u=document.createElement("a");if(u.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),u.setAttribute("download",l),document.createEvent){var h=document.createEvent("MouseEvents");h.initEvent("click",!0,!0),u.dispatchEvent(h)}else u.click()}class P{onWake;constructor(a){this.onWake=a,this.callback=this.callback.bind(this),requestAnimationFrame(this.callback)}#e=!1;cancel(){this.#e=!0}callback(a){this.#e||(requestAnimationFrame(this.callback),this.onWake(a))}}v.AnimationLoop=P;async function F(l){const a=document.createElement("img");a.src=l,await a.decode();const u=a.naturalHeight,h=a.naturalWidth;if(u==0||h==0)throw new Error("problem with image");const S=document.createElement("canvas");S.width=h,S.height=u;const L=S.getContext("2d");if(!L)throw new Error("wtf");return L.drawImage(a,0,0,S.width,S.height),S.toDataURL()}return v}var E=ke();const Pe=.2,J=1,O=1,D=3.25,Q=2,Z=8,q=2.5,Be=Z-Q,me=Z-J,_e=Z-Pe;function le(e){return(e-q)*_e/me+q}function G(e){return(e-q)*Be/me+q}function $e(){const e=E.getById("sample-polygon",SVGPolygonElement),o=`${J},${O} ${J},${D} ${Q},${G(D)} ${Q},${G(O)}`;e.setAttribute("points",o);const g=E.getById("top-fixed",SVGLineElement);g.y1.baseVal.value=le(O);const p=E.getById("bottom-fixed",SVGLineElement);p.y1.baseVal.value=le(D);const c=E.getById("far-text",SVGTextElement),m=(O+D)/2;c.style.setProperty("--center-y",`${m}px`),E.getById("near-text",SVGTextElement).style.setProperty("--center-y",`${G(m)}px`)}$e();const He=E.getById("to-near",SVGLineElement),Oe=E.getById("to-far",SVGLineElement);function ge(e){const o=G(e);Oe.y1.baseVal.value=e,He.y1.baseVal.value=o}window.setMeasurementAngle=ge;const De=C.Random.fromString("Random1"),_=C.initializedArray(20,()=>De()*4+.5);_.push;const Ue=3e3,K=250,ce=Ue+K;function Ge(e){const o=Math.floor(e/ce),g=_[o%_.length],p=_[(o+1)%_.length],c=e-o*ce,m=c<K?C.lerp(g,p,c/K):p;ge(m)}new E.AnimationLoop(Ge);function x(e){if(e==null||e.trim()==="")return;const o=+e;if(isFinite(o))return o}function k(e){const o=x(e);if(o!==void 0)return o>Number.MAX_SAFE_INTEGER||o<Number.MIN_SAFE_INTEGER||o!=Math.floor(o)?void 0:o}const H=E.getById("d-far",HTMLInputElement),W=E.getById("d-far-error",HTMLSpanElement),j=E.getById("d-near",HTMLInputElement),ue=E.getById("d-near-error",HTMLSpanElement),ee=E.getById("progress",HTMLInputElement),he=E.getById("precision",HTMLSelectElement),pe=E.getById("split-count",HTMLSelectElement),U=E.getById("split-result",HTMLTableElement),Ee=E.getById("larger-count",HTMLSelectElement),Ve=E.getById("larger-copies",HTMLSpanElement),we=E.getById("smaller-count",HTMLSelectElement),Xe=E.getById("smaller-copies",HTMLSpanElement),B=E.getById("extended-result",HTMLTableElement),qe=E.getById("smallest-legal-progress",HTMLSpanElement),fe=E.getById("specific-point-result",HTMLTableCellElement);function b(e,o){function g(){o.innerText="invalid"}function p(){return!(e===void 0||!isFinite(e))}function c(y,T){return y.toLocaleString("en-US",{minimumFractionDigits:T,maximumFractionDigits:T,useGrouping:!0})}function m(y){return y.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:20,useGrouping:!0})}function s(y){if(!p())g();else{const T=c(e,y);o.innerText=T}}function w(y){if(!p())g();else{let T=y;const N=Math.round(e*T);let A=Math.abs(N)%T;const P=(Math.abs(N)-A)/T;if(A==0)s(0);else{for(;A%2==0;)A/=2,T/=2;const F=document.createElement("span");F.classList.add("numerator"),F.innerText=A.toString();const l=document.createElement("span");l.classList.add("denominator"),l.innerText=T.toString(),o.innerHTML="",N<0&&o.append("-"),P!=0&&o.append(c(P,0)," "),o.append(F,"/",l)}}}if(!p())g();else switch(he.selectedOptions[0].value){case"0.1":{s(1);break}case"0.01":{s(2);break}case"0.001":{s(3);break}case"0.0001":{s(4);break}case"1/2":{w(2);break}case"1/4":{w(4);break}case"1/8":{w(8);break}case"1/16":{w(16);break}case"1/32":{w(32);break}case"1/64":{w(64);break}case"full":{o.innerText=m(C.assertNonNullable(e));break}default:throw new Error(`wtf (${e})`)}}function $(e,o,g){if(e<=o||o<=0)return;const p=(1-g)*o+g*e;if(!(p<=0))return e*o/p}function je(e,o){if(!(e===void 0||o===void 0)&&!(e<=o||o<=0))return o/(o-e)}function te(e){const g=/^ *(-)?(\d+ +)?(\d+) *\/ *(\d+) *$/.exec(e);if(g){const[,p,c,m,s]=g,w=c===void 0?0:C.assertNonNullable(k(c)),y=C.assertNonNullable(k(m)),T=C.assertNonNullable(k(s)),N=p==="-"?-1:1;return T==0?void 0:N*(w+y/T)}else return x(e)}function V(e){e.style.backgroundColor="pink"}function Ye(e){e.style.backgroundColor=""}function X(e){const o=e.value,g=te(o);return g===void 0?V(e):Ye(e),g}function ne(){let e=X(H),o=X(j);W.innerText="",ue.innerText="",o!==void 0&&o<=0&&(o=void 0,V(j),ue.innerHTML="This value must be <u>greater than</u> 0."),e!==void 0&&(o!==void 0?e<=o&&(e=void 0,V(H),W.innerHTML="The far value must be <u>greater than</u> the near value."):e<=0&&(e=void 0,V(H),W.innerHTML="This value must be <u>greater than</u> 0."));const g=X(ee);b(void 0,fe),b(je(e,o),qe),U.innerHTML="",B.innerHTML="";function p(s,w){const y=s==1?"copy":"copies";w.innerText=y}const c=C.assertNonNullable(k(Ee.selectedOptions[0].value));p(c,Ve);const m=C.assertNonNullable(k(we.selectedOptions[0].value));if(p(m,Xe),!(e===void 0||o===void 0)){{let s=U.insertRow();s.insertCell().innerText="Far",b(e,s.insertCell());const w=C.assertNonNullable(k(pe.selectedOptions[0].value));for(let y=1;y<w;y++)s=U.insertRow(),s.insertCell().innerText=y.toString(),b($(e,o,y/w),s.insertCell());s=U.insertRow(),s.insertCell().innerText="Near",b(o,s.insertCell())}for(let s=c;s>0;s--){const w=B.insertRow();w.insertCell().innerText=s.toString(),b($(e,o,-s),w.insertCell())}{const s=B.insertRow();s.insertCell().innerText="Far",b(e,s.insertCell())}{const s=B.insertRow();s.insertCell().innerText="Near",b(o,s.insertCell())}for(let s=0;s<m;s++){const w=B.insertRow();w.insertCell().innerText=(s+1).toString(),b($(e,o,s+2),w.insertCell())}b(g===void 0?void 0:$(e,o,g),fe)}}ne();[H,j,ee,he,pe,Ee,we].forEach(e=>{e.addEventListener("input",ne)});E.querySelectorAll("[data-fraction]",HTMLSpanElement).forEach(e=>{const o=te(C.assertNonNullable(e.dataset.fraction));o===void 0&&console.error(e),b(o,e)});window.PHIL={dFarInput:H,dNearInput:j,progressInput:ee,parseFraction:te,getNumberValue:X,findPerspectivePoint:$,updateDisplay:ne,parseFloatX:x,parseIntX:k};
